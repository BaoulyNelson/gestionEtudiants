{%load static %}
<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{% block title %}FASCH - Système de Gestion Universitaire{% endblock %}</title>

  <meta name="description" content="FASCH - Premier établissement haïtien en sciences humaines. 50 ans d'excellence académique en psychologie, sociologie, travail social et communication." />

  <!-- Bootstrap 5.3 CSS from CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Crimson+Text:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="{% static 'images/favicon.png' %}" />
  <link rel="stylesheet" href="{% static 'css/main.css' %}" />
  <!-- Custom Styles -->
  <style>
    :root {
      --primary: #1E3A8A;
      --primary-dark: #1e293b;
      --secondary: #7C3AED;
      --accent: #F59E0B;
      --success: #10B981;
      --background: #f8fafc;
      --surface: #ffffff;
      --text-primary: #1f2937;
      --text-secondary: #6b7280;
      --shadow-soft: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
      --shadow-medium: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-large: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }

    body {
      font-family: 'Crimson Text', serif;
      line-height: 1.6;
      color: var(--text-primary);
      background-color: var(--background);
    }

    .font-playfair {
      font-family: 'Playfair Display', serif;
    }

    .font-crimson {
      font-family: 'Crimson Text', serif;
    }

    .bg-primary {
      background-color: var(--primary) !important;
    }

    .bg-primary-900 {
      background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%) !important;
    }

    .bg-secondary {
      background-color: var(--secondary) !important;
    }

    .bg-accent {
      background-color: var(--accent) !important;
    }

    .bg-success {
      background-color: var(--success) !important;
    }

    .bg-surface {
      background-color: var(--surface) !important;
    }

    .bg-background {
      background-color: var(--background) !important;
    }

    .bg-primary-50 {
      background-color: rgba(30, 58, 138, 0.1) !important;
    }

    .bg-secondary-50 {
      background-color: rgba(124, 58, 237, 0.1) !important;
    }

    .text-primary {
      color: var(--primary) !important;
    }

    .text-secondary {
      color: var(--secondary) !important;
    }

    .text-accent {
      color: var(--accent) !important;
    }

    .text-success {
      color: var(--success) !important;
    }

    .btn-primary-custom {
      background: linear-gradient(135deg, var(--primary) 0%, #3b82f6 100%);
      border: none;
      color: white;
      padding: 12px 24px;
      border-radius: 8px;
      font-weight: 600;
      text-decoration: none;
      transition: all 0.3s ease;
      display: inline-block;
    }

    .btn-primary-custom:hover {
      background: linear-gradient(135deg, #1e40af 0%, #2563eb 100%);
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(30, 58, 138, 0.3);
    }

    .btn-secondary-custom {
      background: white;
      border: 2px solid var(--primary);
      color: var(--primary);
      padding: 12px 24px;
      border-radius: 8px;
      font-weight: 600;
      text-decoration: none;
      transition: all 0.3s ease;
      display: inline-block;
    }

    .btn-secondary-custom:hover {
      background: var(--primary);
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(30, 58, 138, 0.3);
    }

    .shadow-soft {
      box-shadow: var(--shadow-soft) !important;
    }

    .shadow-medium {
      box-shadow: var(--shadow-medium) !important;
    }

    .shadow-large {
      box-shadow: var(--shadow-large) !important;
    }

    .hero-dot {
      transition: all 0.3s ease;
      cursor: pointer;
      width: 12px;
      height: 12px;
    }

    .hero-dot:hover {
      transform: scale(1.2);
    }

    .department-card {
      transition: all 0.3s ease;
      cursor: pointer;
      border: 1px solid rgba(0, 0, 0, 0.05);
    }

    .department-card:hover {
      transform: translateY(-8px);
      box-shadow: var(--shadow-large) !important;
    }

    .fade-in {
      opacity: 0;
      transform: translateY(30px);
      transition: all 0.6s ease;
    }

    .fade-in.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .group:hover .group-hover\:scale-105 {
      transform: scale(1.05);
    }

    .group:hover .group-hover\:translate-x-1 {
      transform: translateX(4px);
    }

    .text-balance {
      text-wrap: balance;
    }

    .hero-bg {
      transition: opacity 1s ease-in-out;
    }

    #hero-content {
      transition: opacity 0.5s ease-in-out;
    }

    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #f1f1f1;
    }

    ::-webkit-scrollbar-thumb {
      background: var(--primary);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #1e40af;
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      .hero-dot {
        width: 10px;
        height: 10px;
      }

      .department-card img,
      .news-card img {
        height: 200px !important;
      }
    }
  </style>

  <meta name="theme-color" content="#1E3A8A" />
</head>

<body>

{% include 'partials/header.html' %}

{% if messages %}
<div class="messages-container container d-flex justify-content-center mt-3">
  <div class="col-md-8">
    {% for message in messages %}
    <div class="alert alert-{{ message.tags }} alert-dismissible fade show text-center shadow-sm" role="alert">
      <i class="fas fa-{% if message.tags == 'success' %}check-circle{% elif message.tags == 'error' or message.tags == 'danger' %}exclamation-triangle{% elif message.tags == 'warning' %}exclamation-triangle{% else %}info-circle{% endif %} me-2"></i>
      {{ message }}
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    {% endfor %}
  </div>
</div>
{% endif %}

<main>
  {% block public_content %}

  {% endblock %}
</main>

{% include 'partials/footer.html' %}

<!-- =====================================================
     SCRIPTS - ORDRE IMPORTANT !
     ===================================================== -->

<!-- 1. Bootstrap 5.3 JS Bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

<!-- 2. ✅ CRITIQUE: Définir staticBase AVANT de charger caroussel.js -->
<script>
  // Définir une variable globale pour le dossier static
  const staticBase = "{% static '' %}";
  console.log('✅ StaticBase défini:', staticBase);
</script>

<!-- 3. ✅ Charger caroussel.js APRÈS staticBase -->
<script src="{% static 'js/caroussel.js' %}"></script>

<!-- 4. Script externe Rocket (à la fin) -->
<script type="module" src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Ffaschport5271back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.8"></script>

<!-- 5. Data Injector -->
<script id="dhws-dataInjector" src="/public/dhws-data-injector.js"></script>

</body>

</html>